<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¿«ä¹å¼¹çª— Â· Color Pops</title>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        // é…ç½®Tailwindè‡ªå®šä¹‰é¢œè‰²å’Œå­—ä½“
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Microsoft YaHei', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .popup-shadow {
                box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
            }
            .bg-blur {
                backdrop-filter: blur(8px);
            }
        }
    </style>
    <style>
        body, html {
            margin: 0;
            padding: 0;
            overflow: hidden;
            height: 100%;
            width: 100%;
        }
        /* éªŒè¯å¼¹çª—æ ·å¼ï¼ˆèƒŒæ™¯å›¾+åŠé€æ˜é®ç½©ï¼‰ */
        #verify-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            /* éªŒè¯å¼¹çª—èƒŒæ™¯å›¾ï¼šå’Œä¸»é¡µé¢ä¸€è‡´ */
            background-image: url('DSCF7355.jpg');
            background-size: cover;
            background-position: center;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
        }
        /* åŠé€æ˜é®ç½©ï¼šé¿å…èƒŒæ™¯å›¾è¿‡äº®å¯¼è‡´æ–‡å­—çœ‹ä¸æ¸… */
        #verify-modal::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
        }
        .verify-content {
            background: rgba(255, 255, 255, 0.9); /* ç™½è‰²åŠé€æ˜å¡ç‰‡ */
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            width: 90%;
            max-width: 400px;
            position: relative; /* ç¡®ä¿åœ¨é®ç½©ä¹‹ä¸Š */
            box-shadow: 0 8px 30px rgba(0, 0, 0, 0.2);
        }
        .verify-question {
            font-size: 22px;
            margin-bottom: 20px;
            color: #222; /* æ·±è‰²æ–‡å­—ï¼Œæ›´æ¸…æ™° */
            font-weight: bold;
        }
        #verify-input {
            width: 80%;
            padding: 12px;
            margin-bottom: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            background: white;
        }
        #verify-btn {
            background: #ff6b81; /* ç²‰è‰²æŒ‰é’®ï¼Œæ›´æ¸©é¦¨ */
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: background 0.3s;
            font-weight: bold;
        }
        #verify-btn:hover {
            background: #ff4757;
        }
        .error-tip {
            color: #ff4444;
            margin-top: 10px;
            display: none;
            font-weight: 500;
        }

        /* åŸæœ‰å¼¹çª—æ ·å¼ */
        .popup {
            position: absolute;
            border-radius: 8px;
            cursor: pointer;
            transition: opacity 0.5s ease-out, transform 0.3s ease-out;
            transform-origin: center;
            z-index: 1000;
            overflow: hidden;
        }
        .popup:hover {
            transform: scale(1.05);
        }
        .popup-content {
            padding: 12px 14px;
            user-select: none;
        }
        #background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: 1;
            display: none; /* åˆå§‹éšè—èƒŒæ™¯ï¼ŒéªŒè¯é€šè¿‡åæ˜¾ç¤º */
        }
        #exit-button {
            position: fixed;
            bottom: 20px;
            right: 20px;
            z-index: 1001;
            background-color: rgba(255, 255, 255, 0.9);
            border: none;
            padding: 10px 16px;
            border-radius: 30px;
            cursor: pointer;
            font-family: 'Microsoft YaHei', sans-serif;
            font-weight: bold;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
            display: none; /* åˆå§‹éšè—é€€å‡ºæŒ‰é’®ï¼ŒéªŒè¯é€šè¿‡åæ˜¾ç¤º */
        }
        #exit-button:hover {
            background-color: white;
            transform: scale(1.05);
        }
    </style>
</head>
<body>
    <!-- å¯†ç éªŒè¯å¼¹çª—ï¼ˆå¸¦èƒŒæ™¯å›¾ï¼Œåˆå§‹æ˜¾ç¤ºï¼‰ -->
    <div id="verify-modal">
        <div class="verify-content">
            <div class="verify-question">ä½ å–œä¸å–œæ¬¢æˆ‘å‘€ï¼Ÿ</div>
            <input type="text" id="verify-input" placeholder="è¯·è¾“å…¥ç­”æ¡ˆ">
            <button id="verify-btn">æäº¤</button>
            <div class="error-tip" id="error-tip">ç­”æ¡ˆä¸å¯¹å“¦ï½å†æƒ³æƒ³ï¼Ÿ</div>
        </div>
    </div>

    <!-- èƒŒæ™¯å›¾ç‰‡ï¼ˆåˆå§‹éšè—ï¼‰ -->
    <img id="background" src="DSCF7355.jpg" alt="èƒŒæ™¯å›¾ç‰‡">
    
    <!-- é€€å‡ºæŒ‰é’®ï¼ˆåˆå§‹éšè—ï¼‰ -->
    <button id="exit-button">
        <i class="fa fa-times mr-2"></i>é€€å‡º
    </button>

    <script>
        // === æ ¸å¿ƒï¼šå¯†ç éªŒè¯é€»è¾‘ ===
        const verifyModal = document.getElementById('verify-modal');
        const verifyInput = document.getElementById('verify-input');
        const verifyBtn = document.getElementById('verify-btn');
        const errorTip = document.getElementById('error-tip');
        const background = document.getElementById('background');
        const exitButton = document.getElementById('exit-button');
        const CORRECT_ANSWER = 'å–œæ¬¢'; // æ­£ç¡®ç­”æ¡ˆ

        // éªŒè¯æŒ‰é’®ç‚¹å‡»äº‹ä»¶
        verifyBtn.addEventListener('click', checkAnswer);
        // å›è½¦é”®è§¦å‘éªŒè¯
        verifyInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') checkAnswer();
        });

        // éªŒè¯ç­”æ¡ˆå‡½æ•°
        function checkAnswer() {
            const userAnswer = verifyInput.value.trim().toLowerCase(); // ä¸åŒºåˆ†å¤§å°å†™
            const correctAnswerLower = CORRECT_ANSWER.toLowerCase();
            
            if (userAnswer === correctAnswerLower) {
                // éªŒè¯é€šè¿‡ï¼šéšè—éªŒè¯å¼¹çª—ï¼Œæ˜¾ç¤ºèƒŒæ™¯å’Œé€€å‡ºæŒ‰é’®ï¼Œå¯åŠ¨å¼¹çª—
                verifyModal.style.display = 'none';
                background.style.display = 'block';
                exitButton.style.display = 'block';
                spawnLoop(); // å¯åŠ¨å¼¹çª—å¾ªç¯
            } else {
                // éªŒè¯å¤±è´¥ï¼šæ˜¾ç¤ºé”™è¯¯æç¤ºï¼Œæ¸…ç©ºè¾“å…¥æ¡†
                errorTip.style.display = 'block';
                verifyInput.value = '';
                // è¾“å…¥æ¡†èšç„¦ï¼Œæ–¹ä¾¿é‡æ–°è¾“å…¥
                verifyInput.focus();
            }
        }

        // === åŸæœ‰å¼¹çª—é€»è¾‘ï¼ˆä¸å˜ï¼‰ ===
        // å¯è°ƒå‚æ•°
        const INTERVAL_MS = 50;          // ä¸¤ä¸ªå¼¹çª—ä¹‹é—´çš„é—´éš”ï¼ˆæ¯«ç§’ï¼‰
        const TTL_MS = 5000;            // æ¯ä¸ªå¼¹çª—å­˜åœ¨çš„æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
        const MAX_OPEN = 70;            // åŒæ—¶å­˜åœ¨çš„æœ€å¤§çª—å£æ•°
        const FONT_MIN = 16;
        const FONT_MAX = 28;
        const PADDING = { x: 14, y: 12 }; // æ–‡æœ¬å†…è¾¹è·
        
        // ç§¯æçŸ­è¯­åˆ—è¡¨
        const PHRASES = [
            "è¦å¼€å¿ƒå‘€ âœ¨","å¤šå–æ°´ ğŸ’§","æˆ‘å–œæ¬¢ä½  ğŸ’–","æ·±å‘¼å¸ï½","ä»Šå¤©ä¹Ÿå¾ˆæ£’ï¼",
            "æ—©ç‚¹ä¼‘æ¯ ğŸ˜´","ç›¸ä¿¡è‡ªå·± ğŸ’ª","è®°å¾—åƒæ—©é¤ ğŸ¥","ç»™è‡ªå·±ä¸€ä¸ªå¾®ç¬‘ ğŸ˜Š",
            "ä½ å€¼å¾—è¢«çˆ± ğŸ’—","åˆ«å†…è€—ï¼Œæ…¢ä¸€ç‚¹","å°ç›®æ ‡ä¹Ÿå¾ˆé…· âœ…","æŠ¬å¤´æŒºèƒ¸ï¼",
            "æ‹¥æŠ±å˜åŒ– ğŸŒˆ","å–ç‚¹çƒ­æ°´ï¼Ÿâ˜•","çœ‹çœ‹å¤©ç©º â˜ï¸","è®°å¾—çœ¨çœ¼æŠ¤çœ¼ ğŸ‘€",
            "20-20-20 æ³•åˆ™ â³","è¡¥æ°´æ¶¦å–‰ ğŸ’¦","å’Œæœ‹å‹èŠèŠå¤© ğŸ“","ä»Šå¤©ä¹Ÿè¦åŠ æ²¹ï¼âš¡",
            "ä¿æŒå¥½å¥‡ ğŸ§­","ä½ çš„åŠªåŠ›ä¼šå‘å…‰ â­","ä¸æ¯”è¾ƒï¼Œåªæˆé•¿ ğŸŒ±",
            "çŠ¯é”™ä¹Ÿæ²¡å…³ç³» ğŸ«¶","ä¸€æ­¥ä¸€æ­¥æ¥ ğŸ‘£","ç»™è‡ªå·±ç‚¹æŒå£° ğŸ‘",
            "ä½ å·²ç»åšå¾—å¾ˆå¥½äº† ğŸ¥°","å»æ™’æ™’å¤ªé˜³ â˜€ï¸","æ¸©æŸ”ä»¥å¾… ğŸ’",
            "å…ˆå®Œæˆï¼Œå†å®Œç¾ âœ…","å¿ƒæ€€çƒ­çˆ± ğŸ”¥","æ„¿æ‰€æœ‰çƒ¦æ¼éƒ½æ¶ˆå¤±","ä¿æŒå¥½å¿ƒæƒ…",
            "é¡ºé¡ºåˆ©åˆ©","ç¥ä½ é¡ºåˆ©","åˆ«ç†¬å¤œå“¦","è®°å¾—å–æ°´å“¦","ä¸‡äº‹å¦‚æ„","å¼€å¿ƒæ¯ä¸€å¤©",
            "æ”¾æ¾ä¸€ä¸‹å§","ç…§é¡¾å¥½è‡ªå·±","ç»™è‡ªå·±ä¸€ä¸ªæ‹¥æŠ±","æˆ‘æƒ³ä½ äº†","æ„¿ä¸€åˆ‡éƒ½åˆšåˆšå¥½",
            "å¼€å¼€å¿ƒå¿ƒæ¯ä¸€å¤©","å…ƒæ°”æ»¡æ»¡å‡ºå‘ï¼","ä»Šå¤©ä¹Ÿè¦ç¬‘å‘€ğŸ˜„","ä½ å·²ç»åšçš„å¾ˆå¥½å•¦",
            "åŠ æ²¹ï¼Œä½ æ˜¯æœ€æ£’çš„","æ³¨æ„å®‰å…¨","è®°å¾—æŒ‰æ—¶åƒé¥­","ä¸è¦å¤ªç´¯","ä½ æ˜¯æˆ‘çš„éª„å‚²",
            "è¾›è‹¦äº†","æ…¢æ…¢æ¥ï¼Œä¸æ€¥","æ„¿ä½ è¢«æ¸©æŸ”ä»¥å¾…","åšæŒå°±æ˜¯èƒœåˆ©","å¿ƒè‹¥åœ¨ï¼Œæ¢¦å°±åœ¨",
            "ä½ æ˜¯ç‹¬ä¸€æ— äºŒçš„","å°å°çš„å¹¸ç¦ä¹Ÿå¾ˆé‡è¦","ä½ è‡ªå·±å°±å¥½","ç”Ÿæ´»å¾ˆç¾å¥½","çæƒœå½“ä¸‹",
            "ä½ æ˜¯è¢«çˆ±çš„","æ¯ä¸€å¤©éƒ½æ˜¯æ–°çš„å¼€å§‹","ä¸–ç•Œå› ä½ è€Œç¾ä¸½","ä¿æŒåˆå¿ƒ","ä½ å€¼å¾—æœ€å¥½çš„",
            "æ…¢æ…¢å˜å¥½","ä½ æ˜¯é‡è¦çš„","ä»Šå¤©ä¹Ÿè¦åŠªåŠ›å‘€","åˆ«å¤ªåœ¨æ„","ä¸€åˆ‡éƒ½ä¼šå¦‚æ„¿","ä¿æŒå–„è‰¯",
            "æ„¿ä½ å¿«ä¹","ä¸å¿˜åˆå¿ƒ","ä¿æŒçƒ­æƒ…","ç›¸ä¿¡å¥‡è¿¹","å¿ƒä¹‹æ‰€å‘","ç´ å±¥ä»¥å¾€","äººé—´å€¼å¾—",
            "æœªæ¥å¯æœŸ","æ¯ä¸€å¤©éƒ½å€¼å¾—çæƒœ","åšè‡ªå·±çš„å¤ªé˜³","é™å¾…èŠ±å¼€","ä¸€åˆ‡ç¾å¥½éƒ½ä¼šåˆ°æ¥"
        ];

        // å­˜å‚¨å½“å‰æ‰“å¼€çš„å¼¹çª—
        let openPopups = [];
        let stopFlag = false;

        // ç”Ÿæˆæ˜äº®çš„éšæœºé¢œè‰²
        function brightColor() {
            const h = Math.random();
            const s = 0.65 + Math.random() * 0.3;
            const v = 0.85 + Math.random() * 0.15;
            
            let r, g, b;
            const i = Math.floor(h * 6);
            const f = h * 6 - i;
            const p = v * (1 - s);
            const q = v * (1 - f * s);
            const t = v * (1 - (1 - f) * s);
            
            switch (i % 6) {
                case 0: r = v, g = t, b = p; break;
                case 1: r = q, g = v, b = p; break;
                case 2: r = p, g = v, b = t; break;
                case 3: r = p, g = q, b = v; break;
                case 4: r = t, g = p, b = v; break;
                case 5: r = v, g = p, b = q; break;
            }
            
            return `#${Math.round(r * 255).toString(16).padStart(2, '0')}${Math.round(g * 255).toString(16).padStart(2, '0')}${Math.round(b * 255).toString(16).padStart(2, '0')}`;
        }

        // æ ¹æ®èƒŒæ™¯è‰²ç¡®å®šæ–‡æœ¬é¢œè‰²ï¼ˆé»‘æˆ–ç™½ï¼‰
        function textColorForBg(bgHex) {
            const r = parseInt(bgHex.slice(1, 3), 16);
            const g = parseInt(bgHex.slice(3, 5), 16);
            const b = parseInt(bgHex.slice(5, 7), 16);
            const luminance = 0.2126 * r + 0.7152 * g + 0.0722 * b;
            return luminance > 160 ? '#000000' : '#FFFFFF';
        }

        // åˆ›å»ºä¸€ä¸ªå¼¹çª—
        function createPopup() {
            if (stopFlag) return;
            
            const msg = PHRASES[Math.floor(Math.random() * PHRASES.length)];
            const bgColor = brightColor();
            const textColor = textColorForBg(bgColor);
            const fontSize = FONT_MIN + Math.floor(Math.random() * (FONT_MAX - FONT_MIN + 1));
            const fontWeight = Math.random() > 0.5 ? 'bold' : 'normal';
            
            const popup = document.createElement('div');
            popup.className = 'popup popup-shadow';
            popup.style.backgroundColor = bgColor;
            
            const content = document.createElement('div');
            content.className = 'popup-content';
            content.textContent = msg;
            content.style.color = textColor;
            content.style.fontSize = `${fontSize}px`;
            content.style.fontWeight = fontWeight;
            content.style.fontFamily = 'Microsoft YaHei, sans-serif';
            
            popup.appendChild(content);
            document.body.appendChild(popup);
            
            const width = popup.offsetWidth;
            const height = popup.offsetHeight;
            const maxX = window.innerWidth - width;
            const maxY = window.innerHeight - height;
            const x = Math.floor(Math.random() * maxX);
            const y = Math.floor(Math.random() * maxY);
            
            popup.style.left = `${x}px`;
            popup.style.top = `${y}px`;
            
            popup.addEventListener('click', () => {
                closePopup(popup);
            });
            
            openPopups.push(popup);
            if (openPopups.length > MAX_OPEN) {
                const oldest = openPopups.shift();
                closePopup(oldest);
            }
            
            setTimeout(() => {
                closePopup(popup);
            }, TTL_MS);
        }

        // å…³é—­å¼¹çª—
        function closePopup(popup) {
            popup.style.opacity = '0';
            popup.style.transform = 'scale(0.8)';
            setTimeout(() => {
                if (popup.parentNode) {
                    popup.parentNode.removeChild(popup);
                }
                const index = openPopups.indexOf(popup);
                if (index !== -1) {
                    openPopups.splice(index, 1);
                }
            }, 500);
        }

        // å¼¹çª—å¾ªç¯
        function spawnLoop() {
            if (stopFlag) return;
            createPopup();
            setTimeout(spawnLoop, INTERVAL_MS);
        }

        // åœæ­¢å¹¶æ¸…ç†
        function stopAll() {
            stopFlag = true;
            openPopups.forEach(popup => {
                closePopup(popup);
            });
            openPopups = [];
            alert('å·²é€€å‡ºç¨‹åº');
        }

        // ç»‘å®šé€€å‡ºæŒ‰é’®å’ŒESCé”®
        exitButton.addEventListener('click', stopAll);
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') {
                stopAll();
            }
        });
    </script>
</body>
</html>